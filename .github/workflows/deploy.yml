name: CI/CD Deployment

on:
  release:
    types: [published]
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Display deployment info
        run: |
          echo "ğŸš€ Starting deployment process"
          echo "ğŸ“¦ Release tag: ${{ github.ref }}"
          echo "ğŸŒŸ Event: ${{ github.event_name }}"
          if [ "${{ github.event_name }}" == "release" ]; then
            echo "ğŸ‰ Release name: ${{ github.event.release.name }}"
            echo "ğŸ“ Release tag: ${{ github.event.release.tag_name }}"
          fi
      
      - name: Validate HTML files
        run: |
          echo "âœ… Checking for HTML files..."
          if [ -f "index.html" ]; then
            echo "âœ… index.html found"
          else
            echo "âŒ index.html not found"
            exit 1
          fi
      
      - name: Validate CSS files
        run: |
          echo "âœ… Checking for CSS files..."
          if [ -f "style.css" ]; then
            echo "âœ… style.css found"
          else
            echo "âŒ style.css not found"
            exit 1
          fi
      
      - name: Build summary
        run: |
          echo "ğŸ“Š Build Summary:"
          echo "=================="
          echo "Files to deploy:"
          find . -maxdepth 1 -type f \( -name "*.html" -o -name "*.css" \) -exec ls -lh {} \;
          echo "=================="
      
      - name: Simulate deployment
        run: |
          echo "ğŸŒ Deploying to cloud..."
          echo "âœ… Deployment successful!"
          echo "ğŸ”— Application would be available at your Azure/hosting URL"
      
      - name: Deployment complete
        run: |
          echo "âœ… CI/CD pipeline completed successfully!"
          echo "ğŸŠ Your application is now live!"
